<div class="panel panel-default"
     [ngClass]="{
    'panel-success': boardItem.item.status == 'accepted',
    'panel-warning': boardItem.item.status == 'in progress'}"
     drop-zone [dropParams]="{parent: boardItem.item._id || boardItem.item, type: boardItem.type}"
     drag [dragItem]="boardItem">

  <div class="panel-heading overflow-hidden">
    <h4 class="panel-title">
      <small class="tb-ico bb">B</small>
      <a [routerLink]="['..', boardItem?.item?._id]">{{boardItem.item.title}}</a>

      <span class="fa fa-angle-down vcenter pull-right pointer" (click)="toggleSubitems()"></span>
      <span *ngIf="boardItem && boardItem._id"
            (click)="removeBoardItem(boardItem)"
            class="fa fa-times-circle-o text-muted vcenter pull-right"></span>
      <span class="fa fa-pencil-square-o vcenter pull-right pointer editTaskButton"
            (click)="edit(boardItem?.item)"></span>
      <span class="fa fa-arrows text-muted vcenter drag-button pull-right"></span>

    </h4>
  </div>

  <div *ngIf="showSubitems" class="sub-item-wrap">
    <div>
      <a class="btn btn-sm btn-link" (click)="showForm = 'task'">+ Task</a>
      <a class="btn btn-sm btn-link" (click)="showForm = 'board'">+ Board</a>
    </div>

    <div *ngIf="showForm === 'task'">
      <simple-task-form [parentBoard]="boardItem.item" (taskSaved)="taskSaveHandler($event)"></simple-task-form>
    </div>

    <div *ngIf="showForm === 'board'">
      <simple-board-form [parentBoard]="boardItem.item" (boardSaved)="boardSaveHandler($event)"></simple-board-form>
    </div>
    <board-item-subitems [boardItem]="boardItem" [refreshCount]="refreshCount"></board-item-subitems>
  </div>
</div>
